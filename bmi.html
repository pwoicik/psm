<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>BMI</title>

    <script src="https://unpkg.com/vue@3"></script>

    <link rel="stylesheet" href="https://unpkg.com/modern-css-reset/dist/reset.min.css" />
    <style>
        * {
            font-family: sans-serif;
        }

        body {
            color: #dddddd;
            background-color: #222222;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #app {
            width: fit-content;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        #form {
            width: 150%;
            margin-top: 3rem;
            margin-bottom: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        label {
            display: block;
            width: 100%;
        }

        input {
            display: block;
            width: 100%;
            margin-top: 0.3rem;
        }

        #score {
            padding: 1rem 2rem;
            border-radius: 24px;
            transition: all 1s ease;
        }

        #score.normal {
            color: #222222;
            background-color: chartreuse;
        }

        #score.mild {
            color: #222222;
            background-color: sandybrown;
        }

        #score.moderate {
            color: #222222;
            background-color: chocolate;
        }

        #score.severe {
            color: #dddddd;
            background-color: crimson;
        }

        #score > p {
            text-align: center;
        }
    </style>
</head>

<body>
    <div id="app">
        <h1>BMI Calculator</h1>

        <div id="form">
            <label>
                Weight (kg):
                <input type="number" v-model.number="bodyParams.weight">
            </label>
            <label>
                Height (cm):
                <input type="number" v-model.number="bodyParams.height">
            </label>
        </div>

        <section id="score"
            :class="{ normal: bmi.category === 0, mild: Math.abs(bmi.category) === 1, moderate: Math.abs(bmi.category) === 2, severe: Math.abs(bmi.category) >= 3 }">
            <h2>Your score</h2>
            <p>{{ bmi.score.toFixed(2) }}</p>
        </section>
    </div>

    <script>
        const { computed, createApp, reactive, ref, toRaw, watch } = Vue;

        createApp({
            setup() {
                const bodyParams = reactive({
                    weight: 70,
                    height: 175
                });

                const bmi = computed(() => {
                    const score = bodyParams.weight / (bodyParams.height / 100) ** 2;
                    let category = null;
                    if (isNaN(score)) {
                        category = null;
                    } else if (score < 16) {
                        category = -3;
                    } else if (score < 17) {
                        category = -2;
                    } else if (score < 18.5) {
                        category = -1;
                    } else if (score < 25) {
                        category = 0;
                    } else if (score < 30) {
                        category = 1;
                    } else if (score < 35) {
                        category = 2;
                    } else if (score < 40) {
                        category = 3;
                    } else {
                        category = 4;
                    }

                    return { score, category };
                });

                return {
                    bodyParams,
                    bmi
                };
            },
        }).mount('#app');
    </script>
</body>

</html>